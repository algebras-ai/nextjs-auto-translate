import { loadDictionary } from "./dictionary.js";
import { getLocale, setLocale } from "./locale";
let currentOutputDir = "./intl";
export function setOutputDir(outputDir) {
    currentOutputDir = outputDir;
}
export function getOutputDir() {
    return currentOutputDir;
}
export function translate(scope, locale, outputDir) {
    const targetLocale = locale || getLocale();
    console.log("targetLocale", targetLocale);
    const targetOutputDir = outputDir || currentOutputDir;
    const dict = loadDictionary(targetLocale, targetOutputDir);
    return dict[scope] || scope;
}
// Convenience function for translating with current settings
export function t(scope) {
    return translate(scope);
}
// Function to translate with file path and scope path (as generated by your parser)
export function translateScope(filePath, scopePath, locale, outputDir) {
    const fullScope = `${filePath}::${scopePath}`;
    return translate(fullScope, locale, outputDir);
}
// Function to configure both locale and output directory at once
export function configure(options) {
    if (options.locale)
        setLocale(options.locale);
    if (options.outputDir)
        setOutputDir(options.outputDir);
}
// Function to get translation with fallback
export function translateWithFallback(scope, fallback, locale, outputDir) {
    const result = translate(scope, locale, outputDir);
    console.log("result", result);
    return result === scope ? fallback : result;
}
